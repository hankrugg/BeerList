{"ast":null,"code":"'use client';\n\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React, { useState, useCallback, useMemo } from 'react';\nimport { useSet } from 'react-use-set';\nimport PropTypes from 'prop-types';\nimport omit from 'lodash/omit';\nimport pick from 'lodash/pick';\nimport isNil from 'lodash/isNil';\nimport isFunction from 'lodash/isFunction';\nimport shallowEqual from '../utils/shallowEqual';\nimport TreeView from './TreeView';\nimport { getParentMap, getPathTowardsItem, findNodeOfTree, flattenTree } from '../utils/treeUtils';\nimport { usePaths } from './utils';\nimport { getSafeRegExpString, createChainedFunction, mergeRefs, useControlled, useCustom, useClassNames, useIsMounted, useEventCallback } from '../utils';\nimport { PickerToggle, PickerPopup, PickerToggleTrigger, usePickerClassName, usePickerRef, useToggleKeyDownEvent, useFocusItemValue, pickTriggerPropKeys, omitTriggerPropKeys, listPickerPropTypes } from '../internals/Picker';\nimport SearchBox from '../internals/SearchBox';\nimport { useMap } from '../utils/useMap';\nimport { oneOf } from '../internals/propTypes';\nvar emptyArray = [];\n\n/**\n * The `Cascader` component displays a hierarchical list of options.\n * @see https://rsuitejs.com/components/cascader\n */\nvar Cascader = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _props$as = props.as,\n    Component = _props$as === void 0 ? 'div' : _props$as,\n    _props$data = props.data,\n    data = _props$data === void 0 ? emptyArray : _props$data,\n    _props$classPrefix = props.classPrefix,\n    classPrefix = _props$classPrefix === void 0 ? 'picker' : _props$classPrefix,\n    _props$childrenKey = props.childrenKey,\n    childrenKey = _props$childrenKey === void 0 ? 'children' : _props$childrenKey,\n    _props$valueKey = props.valueKey,\n    valueKey = _props$valueKey === void 0 ? 'value' : _props$valueKey,\n    _props$labelKey = props.labelKey,\n    labelKey = _props$labelKey === void 0 ? 'label' : _props$labelKey,\n    defaultValue = props.defaultValue,\n    placeholder = props.placeholder,\n    disabled = props.disabled,\n    _props$disabledItemVa = props.disabledItemValues,\n    disabledItemValues = _props$disabledItemVa === void 0 ? emptyArray : _props$disabledItemVa,\n    _props$appearance = props.appearance,\n    appearance = _props$appearance === void 0 ? 'default' : _props$appearance,\n    _props$cleanable = props.cleanable,\n    cleanable = _props$cleanable === void 0 ? true : _props$cleanable,\n    overrideLocale = props.locale,\n    toggleAs = props.toggleAs,\n    style = props.style,\n    valueProp = props.value,\n    inline = props.inline,\n    menuClassName = props.menuClassName,\n    menuStyle = props.menuStyle,\n    menuWidth = props.menuWidth,\n    menuHeight = props.menuHeight,\n    _props$searchable = props.searchable,\n    searchable = _props$searchable === void 0 ? true : _props$searchable,\n    parentSelectable = props.parentSelectable,\n    _props$placement = props.placement,\n    placement = _props$placement === void 0 ? 'bottomStart' : _props$placement,\n    id = props.id,\n    renderMenuItem = props.renderMenuItem,\n    renderSearchItem = props.renderSearchItem,\n    renderValue = props.renderValue,\n    renderMenu = props.renderMenu,\n    renderExtraFooter = props.renderExtraFooter,\n    onEnter = props.onEnter,\n    onExited = props.onExited,\n    onClean = props.onClean,\n    onChange = props.onChange,\n    onSelect = props.onSelect,\n    onSearch = props.onSearch,\n    onClose = props.onClose,\n    onOpen = props.onOpen,\n    getChildren = props.getChildren,\n    rest = _objectWithoutPropertiesLoose(props, [\"as\", \"data\", \"classPrefix\", \"childrenKey\", \"valueKey\", \"labelKey\", \"defaultValue\", \"placeholder\", \"disabled\", \"disabledItemValues\", \"appearance\", \"cleanable\", \"locale\", \"toggleAs\", \"style\", \"value\", \"inline\", \"menuClassName\", \"menuStyle\", \"menuWidth\", \"menuHeight\", \"searchable\", \"parentSelectable\", \"placement\", \"id\", \"renderMenuItem\", \"renderSearchItem\", \"renderValue\", \"renderMenu\", \"renderExtraFooter\", \"onEnter\", \"onExited\", \"onClean\", \"onChange\", \"onSelect\", \"onSearch\", \"onClose\", \"onOpen\", \"getChildren\"]); // Use component active state to support keyboard events.\n  var _useState = useState(false),\n    active = _useState[0],\n    setActive = _useState[1];\n  var _usePickerRef = usePickerRef(ref),\n    trigger = _usePickerRef.trigger,\n    root = _usePickerRef.root,\n    target = _usePickerRef.target,\n    overlay = _usePickerRef.overlay,\n    searchInput = _usePickerRef.searchInput;\n  var _ref = useControlled(valueProp, defaultValue),\n    value = _ref[0],\n    setValue = _ref[1];\n  var isMounted = useIsMounted();\n  var loadingItemsSet = useSet();\n  var asyncChildrenMap = useMap();\n  var parentMap = useMemo(function () {\n    return getParentMap(data, function (item) {\n      var _asyncChildrenMap$get;\n      return (_asyncChildrenMap$get = asyncChildrenMap.get(item)) !== null && _asyncChildrenMap$get !== void 0 ? _asyncChildrenMap$get : item[childrenKey];\n    });\n  }, [asyncChildrenMap, childrenKey, data]);\n  var flattenedData = useMemo(function () {\n    return flattenTree(data, function (item) {\n      var _asyncChildrenMap$get2;\n      return (_asyncChildrenMap$get2 = asyncChildrenMap.get(item)) !== null && _asyncChildrenMap$get2 !== void 0 ? _asyncChildrenMap$get2 : item[childrenKey];\n    });\n  }, [asyncChildrenMap, childrenKey, data]);\n\n  // The item that focus is on\n  var _useState2 = useState(),\n    activeItem = _useState2[0],\n    setActiveItem = _useState2[1];\n  var _usePaths = usePaths({\n      data: data,\n      activeItem: activeItem,\n      selectedItem: flattenedData.find(function (item) {\n        return item[valueKey] === value;\n      }),\n      getParent: function getParent(item) {\n        return parentMap.get(item);\n      },\n      getChildren: function getChildren(item) {\n        var _asyncChildrenMap$get3;\n        return (_asyncChildrenMap$get3 = asyncChildrenMap.get(item)) !== null && _asyncChildrenMap$get3 !== void 0 ? _asyncChildrenMap$get3 : item[childrenKey];\n      }\n    }),\n    columnsToDisplay = _usePaths.columnsToDisplay,\n    pathTowardsActiveItem = _usePaths.pathTowardsActiveItem,\n    pathTowardsSelectedItem = _usePaths.pathTowardsSelectedItem;\n  var _useCustom = useCustom('Picker', overrideLocale),\n    locale = _useCustom.locale,\n    rtl = _useCustom.rtl;\n  /**\n   * 1.Have a value and the value is valid.\n   * 2.Regardless of whether the value is valid, as long as renderValue is set, it is judged to have a value.\n   */\n  var hasValue = pathTowardsSelectedItem.length > 0 || !isNil(value) && isFunction(renderValue);\n  var _useClassNames = useClassNames(classPrefix),\n    prefix = _useClassNames.prefix,\n    merge = _useClassNames.merge;\n  var _useState3 = useState(''),\n    searchKeyword = _useState3[0],\n    setSearchKeyword = _useState3[1];\n  var someKeyword = function someKeyword(item, keyword) {\n    if (item[labelKey].match(new RegExp(getSafeRegExpString(keyword || searchKeyword), 'i'))) {\n      return true;\n    }\n    var parent = parentMap.get(item);\n    if (parent && someKeyword(parent)) {\n      return true;\n    }\n    return false;\n  };\n  var getSearchResult = function getSearchResult(keyword) {\n    var items = [];\n    var result = flattenedData.filter(function (item) {\n      if (!parentSelectable && item[childrenKey]) {\n        return false;\n      }\n      return someKeyword(item, keyword);\n    });\n    for (var i = 0; i < result.length; i++) {\n      items.push(result[i]);\n\n      // A maximum of 100 search results are returned.\n      if (i === 99) {\n        return items;\n      }\n    }\n    return items;\n  };\n\n  // Used to hover the focuse item  when trigger `onKeydown`\n  var _useFocusItemValue = useFocusItemValue(value, {\n      rtl: rtl,\n      data: flattenedData,\n      valueKey: valueKey,\n      defaultLayer: pathTowardsSelectedItem !== null && pathTowardsSelectedItem !== void 0 && pathTowardsSelectedItem.length ? pathTowardsSelectedItem.length - 1 : 0,\n      target: function target() {\n        return overlay.current;\n      },\n      getParent: function getParent(item) {\n        return parentMap.get(item);\n      },\n      callback: useCallback(function (value) {\n        setActiveItem(flattenedData.find(function (item) {\n          return item[valueKey] === value;\n        }));\n      }, [flattenedData, setActiveItem, valueKey])\n    }),\n    focusItemValue = _useFocusItemValue.focusItemValue,\n    setFocusItemValue = _useFocusItemValue.setFocusItemValue,\n    setLayer = _useFocusItemValue.setLayer,\n    setKeys = _useFocusItemValue.setKeys,\n    onFocusItem = _useFocusItemValue.onKeyDown;\n  var handleSearch = useEventCallback(function (value, event) {\n    var items = getSearchResult(value);\n    setSearchKeyword(value);\n    onSearch === null || onSearch === void 0 ? void 0 : onSearch(value, event);\n    if (!value || items.length === 0) {\n      setFocusItemValue(undefined);\n      return;\n    }\n    if (items.length > 0) {\n      setFocusItemValue(items[0][valueKey]);\n      setLayer(0);\n      setKeys([]);\n    }\n  });\n  var handleEntered = useEventCallback(function () {\n    if (!target.current) {\n      return;\n    }\n    onOpen === null || onOpen === void 0 ? void 0 : onOpen();\n    setActive(true);\n  });\n  var handleExited = useEventCallback(function () {\n    if (!target.current) {\n      return;\n    }\n    onClose === null || onClose === void 0 ? void 0 : onClose();\n    setActive(false);\n    setSearchKeyword('');\n  });\n  var handleClose = useEventCallback(function () {\n    var _trigger$current, _target$current, _target$current$focus;\n    (_trigger$current = trigger.current) === null || _trigger$current === void 0 ? void 0 : _trigger$current.close();\n\n    // The focus is on the trigger button after closing\n    (_target$current = target.current) === null || _target$current === void 0 ? void 0 : (_target$current$focus = _target$current.focus) === null || _target$current$focus === void 0 ? void 0 : _target$current$focus.call(_target$current);\n  });\n  var handleClean = useEventCallback(function (event) {\n    if (disabled || !target.current) {\n      return;\n    }\n    setValue(null);\n    onChange === null || onChange === void 0 ? void 0 : onChange(null, event);\n  });\n  var handleMenuPressEnter = useEventCallback(function (event) {\n    var focusItem = findNodeOfTree(data, function (item) {\n      return item[valueKey] === focusItemValue;\n    });\n    var isLeafNode = focusItem && !focusItem[childrenKey];\n    if (isLeafNode) {\n      setValue(focusItemValue);\n      if (pathTowardsActiveItem.length) {\n        setLayer(pathTowardsActiveItem.length - 1);\n      }\n      if (!shallowEqual(value, focusItemValue)) {\n        onSelect === null || onSelect === void 0 ? void 0 : onSelect(focusItem, pathTowardsActiveItem, event);\n        onChange === null || onChange === void 0 ? void 0 : onChange(focusItemValue !== null && focusItemValue !== void 0 ? focusItemValue : null, event);\n      }\n      handleClose();\n    }\n  });\n  var onPickerKeyDown = useToggleKeyDownEvent(_extends({\n    toggle: !focusItemValue || !active,\n    trigger: trigger,\n    target: target,\n    overlay: overlay,\n    searchInput: searchInput,\n    active: active,\n    onExit: handleClean,\n    onMenuKeyDown: onFocusItem,\n    onMenuPressEnter: handleMenuPressEnter\n  }, rest));\n  var handleSelect = useEventCallback(function (node, cascadePaths, isLeafNode, event) {\n    var _node$childrenKey, _trigger$current2;\n    onSelect === null || onSelect === void 0 ? void 0 : onSelect(node, cascadePaths, event);\n    setActiveItem(node);\n    var nextValue = node[valueKey];\n\n    // Lazy load node's children\n    if (typeof getChildren === 'function' && ((_node$childrenKey = node[childrenKey]) === null || _node$childrenKey === void 0 ? void 0 : _node$childrenKey.length) === 0 && !asyncChildrenMap.has(node)) {\n      loadingItemsSet.add(node);\n      var children = getChildren(node);\n      if (children instanceof Promise) {\n        children.then(function (data) {\n          if (isMounted()) {\n            loadingItemsSet.delete(node);\n            asyncChildrenMap.set(node, data);\n          }\n        });\n      } else {\n        loadingItemsSet.delete(node);\n        asyncChildrenMap.set(node, children);\n      }\n    }\n    if (isLeafNode) {\n      // Determines whether the option is a leaf node, and if so, closes the picker.\n      handleClose();\n      setValue(nextValue);\n      if (!shallowEqual(value, nextValue)) {\n        onChange === null || onChange === void 0 ? void 0 : onChange(nextValue, event);\n      }\n      return;\n    }\n\n    /** When the parent is optional, the value and the displayed path are updated. */\n    if (parentSelectable && !shallowEqual(value, nextValue)) {\n      setValue(nextValue);\n      onChange === null || onChange === void 0 ? void 0 : onChange(nextValue, event);\n    }\n\n    // Update menu position\n    (_trigger$current2 = trigger.current) === null || _trigger$current2 === void 0 ? void 0 : _trigger$current2.updatePosition();\n  });\n\n  /**\n   * The search structure option is processed after being selected.\n   */\n  var handleSearchRowSelect = useEventCallback(function (node, nodes, event) {\n    var nextValue = node[valueKey];\n    handleClose();\n    setSearchKeyword('');\n    setValue(nextValue);\n    onSelect === null || onSelect === void 0 ? void 0 : onSelect(node, nodes, event);\n    onChange === null || onChange === void 0 ? void 0 : onChange(nextValue, event);\n  });\n  var renderSearchRow = function renderSearchRow(item, key) {\n    var regx = new RegExp(getSafeRegExpString(searchKeyword), 'ig');\n    var nodes = getPathTowardsItem(item, function (item) {\n      return parentMap.get(item);\n    });\n    var formattedNodes = nodes.map(function (node) {\n      var _extends2;\n      var labelElements = [];\n      var a = node[labelKey].split(regx);\n      var b = node[labelKey].match(regx);\n      for (var i = 0; i < a.length; i++) {\n        labelElements.push(a[i]);\n        if (b && b[i]) {\n          labelElements.push( /*#__PURE__*/React.createElement(\"span\", {\n            key: i,\n            className: prefix('cascader-search-match')\n          }, b[i]));\n        }\n      }\n      return _extends({}, node, (_extends2 = {}, _extends2[labelKey] = labelElements, _extends2));\n    });\n    var disabled = disabledItemValues.some(function (value) {\n      return formattedNodes.some(function (node) {\n        return node[valueKey] === value;\n      });\n    });\n    var itemClasses = prefix('cascader-row', {\n      'cascader-row-disabled': disabled,\n      'cascader-row-focus': item[valueKey] === focusItemValue\n    });\n    var label = formattedNodes.map(function (node, index) {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        key: \"col-\" + index,\n        className: prefix('cascader-col')\n      }, node[labelKey]);\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      role: \"treeitem\",\n      key: key,\n      \"aria-disabled\": disabled,\n      \"data-key\": item[valueKey],\n      className: itemClasses,\n      tabIndex: -1,\n      onClick: function onClick(event) {\n        if (!disabled) {\n          handleSearchRowSelect(item, nodes, event);\n        }\n      }\n    }, renderSearchItem ? renderSearchItem(label, nodes) : label);\n  };\n  var renderSearchResultPanel = function renderSearchResultPanel() {\n    if (searchKeyword === '') {\n      return null;\n    }\n    var items = getSearchResult();\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('cascader-search-panel'),\n      \"data-layer\": 0,\n      role: \"tree\"\n    }, items.length ? items.map(renderSearchRow) : /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('none')\n    }, locale.noResultsText));\n  };\n  var renderTreeView = function renderTreeView(positionProps, speakerRef) {\n    var _ref2 = positionProps || {},\n      left = _ref2.left,\n      top = _ref2.top,\n      className = _ref2.className;\n    var styles = _extends({}, menuStyle, {\n      left: left,\n      top: top\n    });\n    var classes = merge(className, menuClassName, prefix('cascader-menu', {\n      inline: inline\n    }));\n    return /*#__PURE__*/React.createElement(PickerPopup, {\n      ref: mergeRefs(overlay, speakerRef),\n      className: classes,\n      style: styles,\n      target: trigger,\n      onKeyDown: onPickerKeyDown\n    }, searchable && /*#__PURE__*/React.createElement(SearchBox, {\n      placeholder: locale === null || locale === void 0 ? void 0 : locale.searchPlaceholder,\n      onChange: handleSearch,\n      value: searchKeyword,\n      inputRef: searchInput\n    }), renderSearchResultPanel(), searchKeyword === '' && /*#__PURE__*/React.createElement(TreeView, {\n      menuWidth: menuWidth,\n      menuHeight: menuHeight,\n      disabledItemValues: disabledItemValues,\n      loadingItemsSet: loadingItemsSet,\n      valueKey: valueKey,\n      labelKey: labelKey,\n      childrenKey: childrenKey,\n      classPrefix: 'picker-cascader-menu',\n      cascadeData: columnsToDisplay,\n      cascadePaths: pathTowardsActiveItem,\n      activeItemValue: value\n      // FIXME make onSelect generic\n      ,\n\n      onSelect: handleSelect,\n      renderMenu: renderMenu,\n      renderMenuItem: renderMenuItem\n    }), renderExtraFooter === null || renderExtraFooter === void 0 ? void 0 : renderExtraFooter());\n  };\n  var selectedElement = placeholder;\n  if (pathTowardsSelectedItem.length > 0) {\n    selectedElement = [];\n    pathTowardsSelectedItem.forEach(function (item, index) {\n      var key = item[valueKey] || item[labelKey];\n      selectedElement.push( /*#__PURE__*/React.createElement(\"span\", {\n        key: key\n      }, item[labelKey]));\n      if (index < pathTowardsSelectedItem.length - 1) {\n        selectedElement.push( /*#__PURE__*/React.createElement(\"span\", {\n          className: \"separator\",\n          key: key + \"-separator\"\n        }, ' / '));\n      }\n    });\n  }\n  if (!isNil(value) && isFunction(renderValue)) {\n    selectedElement = renderValue(value, pathTowardsSelectedItem, selectedElement);\n    // If renderValue returns null or undefined, hasValue is false.\n    if (isNil(selectedElement)) {\n      hasValue = false;\n    }\n  }\n  var _usePickerClassName = usePickerClassName(_extends({}, props, {\n      classPrefix: classPrefix,\n      hasValue: hasValue,\n      name: 'cascader',\n      appearance: appearance,\n      cleanable: cleanable\n    })),\n    classes = _usePickerClassName[0],\n    usedClassNamePropKeys = _usePickerClassName[1]; // TODO: bad api design\n  //       consider an isolated Menu component\n  if (inline) {\n    return renderTreeView();\n  }\n  return /*#__PURE__*/React.createElement(PickerToggleTrigger, {\n    id: id,\n    popupType: \"tree\",\n    pickerProps: pick(props, pickTriggerPropKeys),\n    ref: trigger,\n    placement: placement,\n    onEntered: createChainedFunction(handleEntered, onEnter),\n    onExited: createChainedFunction(handleExited, onExited),\n    speaker: renderTreeView\n  }, /*#__PURE__*/React.createElement(Component, {\n    className: classes,\n    style: style,\n    ref: root\n  }, /*#__PURE__*/React.createElement(PickerToggle, _extends({}, omit(rest, [].concat(omitTriggerPropKeys, usedClassNamePropKeys)), {\n    ref: target,\n    as: toggleAs,\n    appearance: appearance,\n    disabled: disabled,\n    onClean: createChainedFunction(handleClean, onClean),\n    onKeyDown: onPickerKeyDown,\n    cleanable: cleanable && !disabled,\n    hasValue: hasValue,\n    active: active,\n    placement: placement,\n    inputValue: value !== null && value !== void 0 ? value : '',\n    focusItemValue: focusItemValue\n  }), selectedElement || (locale === null || locale === void 0 ? void 0 : locale.placeholder))));\n});\nCascader.displayName = 'Cascader';\nCascader.propTypes = _extends({}, listPickerPropTypes, {\n  disabledItemValues: PropTypes.array,\n  locale: PropTypes.any,\n  appearance: oneOf(['default', 'subtle']),\n  renderMenu: PropTypes.func,\n  onSelect: PropTypes.func,\n  onSearch: PropTypes.func,\n  cleanable: PropTypes.bool,\n  renderMenuItem: PropTypes.func,\n  renderSearchItem: PropTypes.func,\n  menuWidth: PropTypes.number,\n  menuHeight: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  searchable: PropTypes.bool,\n  inline: PropTypes.bool,\n  parentSelectable: PropTypes.bool\n});\nexport default Cascader;","map":{"version":3,"names":["_extends","_objectWithoutPropertiesLoose","React","useState","useCallback","useMemo","useSet","PropTypes","omit","pick","isNil","isFunction","shallowEqual","TreeView","getParentMap","getPathTowardsItem","findNodeOfTree","flattenTree","usePaths","getSafeRegExpString","createChainedFunction","mergeRefs","useControlled","useCustom","useClassNames","useIsMounted","useEventCallback","PickerToggle","PickerPopup","PickerToggleTrigger","usePickerClassName","usePickerRef","useToggleKeyDownEvent","useFocusItemValue","pickTriggerPropKeys","omitTriggerPropKeys","listPickerPropTypes","SearchBox","useMap","oneOf","emptyArray","Cascader","forwardRef","props","ref","_props$as","as","Component","_props$data","data","_props$classPrefix","classPrefix","_props$childrenKey","childrenKey","_props$valueKey","valueKey","_props$labelKey","labelKey","defaultValue","placeholder","disabled","_props$disabledItemVa","disabledItemValues","_props$appearance","appearance","_props$cleanable","cleanable","overrideLocale","locale","toggleAs","style","valueProp","value","inline","menuClassName","menuStyle","menuWidth","menuHeight","_props$searchable","searchable","parentSelectable","_props$placement","placement","id","renderMenuItem","renderSearchItem","renderValue","renderMenu","renderExtraFooter","onEnter","onExited","onClean","onChange","onSelect","onSearch","onClose","onOpen","getChildren","rest","_useState","active","setActive","_usePickerRef","trigger","root","target","overlay","searchInput","_ref","setValue","isMounted","loadingItemsSet","asyncChildrenMap","parentMap","item","_asyncChildrenMap$get","get","flattenedData","_asyncChildrenMap$get2","_useState2","activeItem","setActiveItem","_usePaths","selectedItem","find","getParent","_asyncChildrenMap$get3","columnsToDisplay","pathTowardsActiveItem","pathTowardsSelectedItem","_useCustom","rtl","hasValue","length","_useClassNames","prefix","merge","_useState3","searchKeyword","setSearchKeyword","someKeyword","keyword","match","RegExp","parent","getSearchResult","items","result","filter","i","push","_useFocusItemValue","defaultLayer","current","callback","focusItemValue","setFocusItemValue","setLayer","setKeys","onFocusItem","onKeyDown","handleSearch","event","undefined","handleEntered","handleExited","handleClose","_trigger$current","_target$current","_target$current$focus","close","focus","call","handleClean","handleMenuPressEnter","focusItem","isLeafNode","onPickerKeyDown","toggle","onExit","onMenuKeyDown","onMenuPressEnter","handleSelect","node","cascadePaths","_node$childrenKey","_trigger$current2","nextValue","has","add","children","Promise","then","delete","set","updatePosition","handleSearchRowSelect","nodes","renderSearchRow","key","regx","formattedNodes","map","_extends2","labelElements","a","split","b","createElement","className","some","itemClasses","label","index","role","tabIndex","onClick","renderSearchResultPanel","noResultsText","renderTreeView","positionProps","speakerRef","_ref2","left","top","styles","classes","searchPlaceholder","inputRef","cascadeData","activeItemValue","selectedElement","forEach","_usePickerClassName","name","usedClassNamePropKeys","popupType","pickerProps","onEntered","speaker","concat","inputValue","displayName","propTypes","array","any","func","bool","number","oneOfType","string"],"sources":["/Users/hankrugg/projects/Python/Beer/myapp/node_modules/rsuite/esm/Cascader/Cascader.js"],"sourcesContent":["'use client';\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React, { useState, useCallback, useMemo } from 'react';\nimport { useSet } from 'react-use-set';\nimport PropTypes from 'prop-types';\nimport omit from 'lodash/omit';\nimport pick from 'lodash/pick';\nimport isNil from 'lodash/isNil';\nimport isFunction from 'lodash/isFunction';\nimport shallowEqual from '../utils/shallowEqual';\nimport TreeView from './TreeView';\nimport { getParentMap, getPathTowardsItem, findNodeOfTree, flattenTree } from '../utils/treeUtils';\nimport { usePaths } from './utils';\nimport { getSafeRegExpString, createChainedFunction, mergeRefs, useControlled, useCustom, useClassNames, useIsMounted, useEventCallback } from '../utils';\nimport { PickerToggle, PickerPopup, PickerToggleTrigger, usePickerClassName, usePickerRef, useToggleKeyDownEvent, useFocusItemValue, pickTriggerPropKeys, omitTriggerPropKeys, listPickerPropTypes } from '../internals/Picker';\nimport SearchBox from '../internals/SearchBox';\nimport { useMap } from '../utils/useMap';\nimport { oneOf } from '../internals/propTypes';\nvar emptyArray = [];\n\n/**\n * The `Cascader` component displays a hierarchical list of options.\n * @see https://rsuitejs.com/components/cascader\n */\nvar Cascader = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _props$as = props.as,\n    Component = _props$as === void 0 ? 'div' : _props$as,\n    _props$data = props.data,\n    data = _props$data === void 0 ? emptyArray : _props$data,\n    _props$classPrefix = props.classPrefix,\n    classPrefix = _props$classPrefix === void 0 ? 'picker' : _props$classPrefix,\n    _props$childrenKey = props.childrenKey,\n    childrenKey = _props$childrenKey === void 0 ? 'children' : _props$childrenKey,\n    _props$valueKey = props.valueKey,\n    valueKey = _props$valueKey === void 0 ? 'value' : _props$valueKey,\n    _props$labelKey = props.labelKey,\n    labelKey = _props$labelKey === void 0 ? 'label' : _props$labelKey,\n    defaultValue = props.defaultValue,\n    placeholder = props.placeholder,\n    disabled = props.disabled,\n    _props$disabledItemVa = props.disabledItemValues,\n    disabledItemValues = _props$disabledItemVa === void 0 ? emptyArray : _props$disabledItemVa,\n    _props$appearance = props.appearance,\n    appearance = _props$appearance === void 0 ? 'default' : _props$appearance,\n    _props$cleanable = props.cleanable,\n    cleanable = _props$cleanable === void 0 ? true : _props$cleanable,\n    overrideLocale = props.locale,\n    toggleAs = props.toggleAs,\n    style = props.style,\n    valueProp = props.value,\n    inline = props.inline,\n    menuClassName = props.menuClassName,\n    menuStyle = props.menuStyle,\n    menuWidth = props.menuWidth,\n    menuHeight = props.menuHeight,\n    _props$searchable = props.searchable,\n    searchable = _props$searchable === void 0 ? true : _props$searchable,\n    parentSelectable = props.parentSelectable,\n    _props$placement = props.placement,\n    placement = _props$placement === void 0 ? 'bottomStart' : _props$placement,\n    id = props.id,\n    renderMenuItem = props.renderMenuItem,\n    renderSearchItem = props.renderSearchItem,\n    renderValue = props.renderValue,\n    renderMenu = props.renderMenu,\n    renderExtraFooter = props.renderExtraFooter,\n    onEnter = props.onEnter,\n    onExited = props.onExited,\n    onClean = props.onClean,\n    onChange = props.onChange,\n    onSelect = props.onSelect,\n    onSearch = props.onSearch,\n    onClose = props.onClose,\n    onOpen = props.onOpen,\n    getChildren = props.getChildren,\n    rest = _objectWithoutPropertiesLoose(props, [\"as\", \"data\", \"classPrefix\", \"childrenKey\", \"valueKey\", \"labelKey\", \"defaultValue\", \"placeholder\", \"disabled\", \"disabledItemValues\", \"appearance\", \"cleanable\", \"locale\", \"toggleAs\", \"style\", \"value\", \"inline\", \"menuClassName\", \"menuStyle\", \"menuWidth\", \"menuHeight\", \"searchable\", \"parentSelectable\", \"placement\", \"id\", \"renderMenuItem\", \"renderSearchItem\", \"renderValue\", \"renderMenu\", \"renderExtraFooter\", \"onEnter\", \"onExited\", \"onClean\", \"onChange\", \"onSelect\", \"onSearch\", \"onClose\", \"onOpen\", \"getChildren\"]); // Use component active state to support keyboard events.\n  var _useState = useState(false),\n    active = _useState[0],\n    setActive = _useState[1];\n  var _usePickerRef = usePickerRef(ref),\n    trigger = _usePickerRef.trigger,\n    root = _usePickerRef.root,\n    target = _usePickerRef.target,\n    overlay = _usePickerRef.overlay,\n    searchInput = _usePickerRef.searchInput;\n  var _ref = useControlled(valueProp, defaultValue),\n    value = _ref[0],\n    setValue = _ref[1];\n  var isMounted = useIsMounted();\n  var loadingItemsSet = useSet();\n  var asyncChildrenMap = useMap();\n  var parentMap = useMemo(function () {\n    return getParentMap(data, function (item) {\n      var _asyncChildrenMap$get;\n      return (_asyncChildrenMap$get = asyncChildrenMap.get(item)) !== null && _asyncChildrenMap$get !== void 0 ? _asyncChildrenMap$get : item[childrenKey];\n    });\n  }, [asyncChildrenMap, childrenKey, data]);\n  var flattenedData = useMemo(function () {\n    return flattenTree(data, function (item) {\n      var _asyncChildrenMap$get2;\n      return (_asyncChildrenMap$get2 = asyncChildrenMap.get(item)) !== null && _asyncChildrenMap$get2 !== void 0 ? _asyncChildrenMap$get2 : item[childrenKey];\n    });\n  }, [asyncChildrenMap, childrenKey, data]);\n\n  // The item that focus is on\n  var _useState2 = useState(),\n    activeItem = _useState2[0],\n    setActiveItem = _useState2[1];\n  var _usePaths = usePaths({\n      data: data,\n      activeItem: activeItem,\n      selectedItem: flattenedData.find(function (item) {\n        return item[valueKey] === value;\n      }),\n      getParent: function getParent(item) {\n        return parentMap.get(item);\n      },\n      getChildren: function getChildren(item) {\n        var _asyncChildrenMap$get3;\n        return (_asyncChildrenMap$get3 = asyncChildrenMap.get(item)) !== null && _asyncChildrenMap$get3 !== void 0 ? _asyncChildrenMap$get3 : item[childrenKey];\n      }\n    }),\n    columnsToDisplay = _usePaths.columnsToDisplay,\n    pathTowardsActiveItem = _usePaths.pathTowardsActiveItem,\n    pathTowardsSelectedItem = _usePaths.pathTowardsSelectedItem;\n  var _useCustom = useCustom('Picker', overrideLocale),\n    locale = _useCustom.locale,\n    rtl = _useCustom.rtl;\n  /**\n   * 1.Have a value and the value is valid.\n   * 2.Regardless of whether the value is valid, as long as renderValue is set, it is judged to have a value.\n   */\n  var hasValue = pathTowardsSelectedItem.length > 0 || !isNil(value) && isFunction(renderValue);\n  var _useClassNames = useClassNames(classPrefix),\n    prefix = _useClassNames.prefix,\n    merge = _useClassNames.merge;\n  var _useState3 = useState(''),\n    searchKeyword = _useState3[0],\n    setSearchKeyword = _useState3[1];\n  var someKeyword = function someKeyword(item, keyword) {\n    if (item[labelKey].match(new RegExp(getSafeRegExpString(keyword || searchKeyword), 'i'))) {\n      return true;\n    }\n    var parent = parentMap.get(item);\n    if (parent && someKeyword(parent)) {\n      return true;\n    }\n    return false;\n  };\n  var getSearchResult = function getSearchResult(keyword) {\n    var items = [];\n    var result = flattenedData.filter(function (item) {\n      if (!parentSelectable && item[childrenKey]) {\n        return false;\n      }\n      return someKeyword(item, keyword);\n    });\n    for (var i = 0; i < result.length; i++) {\n      items.push(result[i]);\n\n      // A maximum of 100 search results are returned.\n      if (i === 99) {\n        return items;\n      }\n    }\n    return items;\n  };\n\n  // Used to hover the focuse item  when trigger `onKeydown`\n  var _useFocusItemValue = useFocusItemValue(value, {\n      rtl: rtl,\n      data: flattenedData,\n      valueKey: valueKey,\n      defaultLayer: pathTowardsSelectedItem !== null && pathTowardsSelectedItem !== void 0 && pathTowardsSelectedItem.length ? pathTowardsSelectedItem.length - 1 : 0,\n      target: function target() {\n        return overlay.current;\n      },\n      getParent: function getParent(item) {\n        return parentMap.get(item);\n      },\n      callback: useCallback(function (value) {\n        setActiveItem(flattenedData.find(function (item) {\n          return item[valueKey] === value;\n        }));\n      }, [flattenedData, setActiveItem, valueKey])\n    }),\n    focusItemValue = _useFocusItemValue.focusItemValue,\n    setFocusItemValue = _useFocusItemValue.setFocusItemValue,\n    setLayer = _useFocusItemValue.setLayer,\n    setKeys = _useFocusItemValue.setKeys,\n    onFocusItem = _useFocusItemValue.onKeyDown;\n  var handleSearch = useEventCallback(function (value, event) {\n    var items = getSearchResult(value);\n    setSearchKeyword(value);\n    onSearch === null || onSearch === void 0 ? void 0 : onSearch(value, event);\n    if (!value || items.length === 0) {\n      setFocusItemValue(undefined);\n      return;\n    }\n    if (items.length > 0) {\n      setFocusItemValue(items[0][valueKey]);\n      setLayer(0);\n      setKeys([]);\n    }\n  });\n  var handleEntered = useEventCallback(function () {\n    if (!target.current) {\n      return;\n    }\n    onOpen === null || onOpen === void 0 ? void 0 : onOpen();\n    setActive(true);\n  });\n  var handleExited = useEventCallback(function () {\n    if (!target.current) {\n      return;\n    }\n    onClose === null || onClose === void 0 ? void 0 : onClose();\n    setActive(false);\n    setSearchKeyword('');\n  });\n  var handleClose = useEventCallback(function () {\n    var _trigger$current, _target$current, _target$current$focus;\n    (_trigger$current = trigger.current) === null || _trigger$current === void 0 ? void 0 : _trigger$current.close();\n\n    // The focus is on the trigger button after closing\n    (_target$current = target.current) === null || _target$current === void 0 ? void 0 : (_target$current$focus = _target$current.focus) === null || _target$current$focus === void 0 ? void 0 : _target$current$focus.call(_target$current);\n  });\n  var handleClean = useEventCallback(function (event) {\n    if (disabled || !target.current) {\n      return;\n    }\n    setValue(null);\n    onChange === null || onChange === void 0 ? void 0 : onChange(null, event);\n  });\n  var handleMenuPressEnter = useEventCallback(function (event) {\n    var focusItem = findNodeOfTree(data, function (item) {\n      return item[valueKey] === focusItemValue;\n    });\n    var isLeafNode = focusItem && !focusItem[childrenKey];\n    if (isLeafNode) {\n      setValue(focusItemValue);\n      if (pathTowardsActiveItem.length) {\n        setLayer(pathTowardsActiveItem.length - 1);\n      }\n      if (!shallowEqual(value, focusItemValue)) {\n        onSelect === null || onSelect === void 0 ? void 0 : onSelect(focusItem, pathTowardsActiveItem, event);\n        onChange === null || onChange === void 0 ? void 0 : onChange(focusItemValue !== null && focusItemValue !== void 0 ? focusItemValue : null, event);\n      }\n      handleClose();\n    }\n  });\n  var onPickerKeyDown = useToggleKeyDownEvent(_extends({\n    toggle: !focusItemValue || !active,\n    trigger: trigger,\n    target: target,\n    overlay: overlay,\n    searchInput: searchInput,\n    active: active,\n    onExit: handleClean,\n    onMenuKeyDown: onFocusItem,\n    onMenuPressEnter: handleMenuPressEnter\n  }, rest));\n  var handleSelect = useEventCallback(function (node, cascadePaths, isLeafNode, event) {\n    var _node$childrenKey, _trigger$current2;\n    onSelect === null || onSelect === void 0 ? void 0 : onSelect(node, cascadePaths, event);\n    setActiveItem(node);\n    var nextValue = node[valueKey];\n\n    // Lazy load node's children\n    if (typeof getChildren === 'function' && ((_node$childrenKey = node[childrenKey]) === null || _node$childrenKey === void 0 ? void 0 : _node$childrenKey.length) === 0 && !asyncChildrenMap.has(node)) {\n      loadingItemsSet.add(node);\n      var children = getChildren(node);\n      if (children instanceof Promise) {\n        children.then(function (data) {\n          if (isMounted()) {\n            loadingItemsSet.delete(node);\n            asyncChildrenMap.set(node, data);\n          }\n        });\n      } else {\n        loadingItemsSet.delete(node);\n        asyncChildrenMap.set(node, children);\n      }\n    }\n    if (isLeafNode) {\n      // Determines whether the option is a leaf node, and if so, closes the picker.\n      handleClose();\n      setValue(nextValue);\n      if (!shallowEqual(value, nextValue)) {\n        onChange === null || onChange === void 0 ? void 0 : onChange(nextValue, event);\n      }\n      return;\n    }\n\n    /** When the parent is optional, the value and the displayed path are updated. */\n    if (parentSelectable && !shallowEqual(value, nextValue)) {\n      setValue(nextValue);\n      onChange === null || onChange === void 0 ? void 0 : onChange(nextValue, event);\n    }\n\n    // Update menu position\n    (_trigger$current2 = trigger.current) === null || _trigger$current2 === void 0 ? void 0 : _trigger$current2.updatePosition();\n  });\n\n  /**\n   * The search structure option is processed after being selected.\n   */\n  var handleSearchRowSelect = useEventCallback(function (node, nodes, event) {\n    var nextValue = node[valueKey];\n    handleClose();\n    setSearchKeyword('');\n    setValue(nextValue);\n    onSelect === null || onSelect === void 0 ? void 0 : onSelect(node, nodes, event);\n    onChange === null || onChange === void 0 ? void 0 : onChange(nextValue, event);\n  });\n  var renderSearchRow = function renderSearchRow(item, key) {\n    var regx = new RegExp(getSafeRegExpString(searchKeyword), 'ig');\n    var nodes = getPathTowardsItem(item, function (item) {\n      return parentMap.get(item);\n    });\n    var formattedNodes = nodes.map(function (node) {\n      var _extends2;\n      var labelElements = [];\n      var a = node[labelKey].split(regx);\n      var b = node[labelKey].match(regx);\n      for (var i = 0; i < a.length; i++) {\n        labelElements.push(a[i]);\n        if (b && b[i]) {\n          labelElements.push( /*#__PURE__*/React.createElement(\"span\", {\n            key: i,\n            className: prefix('cascader-search-match')\n          }, b[i]));\n        }\n      }\n      return _extends({}, node, (_extends2 = {}, _extends2[labelKey] = labelElements, _extends2));\n    });\n    var disabled = disabledItemValues.some(function (value) {\n      return formattedNodes.some(function (node) {\n        return node[valueKey] === value;\n      });\n    });\n    var itemClasses = prefix('cascader-row', {\n      'cascader-row-disabled': disabled,\n      'cascader-row-focus': item[valueKey] === focusItemValue\n    });\n    var label = formattedNodes.map(function (node, index) {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        key: \"col-\" + index,\n        className: prefix('cascader-col')\n      }, node[labelKey]);\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      role: \"treeitem\",\n      key: key,\n      \"aria-disabled\": disabled,\n      \"data-key\": item[valueKey],\n      className: itemClasses,\n      tabIndex: -1,\n      onClick: function onClick(event) {\n        if (!disabled) {\n          handleSearchRowSelect(item, nodes, event);\n        }\n      }\n    }, renderSearchItem ? renderSearchItem(label, nodes) : label);\n  };\n  var renderSearchResultPanel = function renderSearchResultPanel() {\n    if (searchKeyword === '') {\n      return null;\n    }\n    var items = getSearchResult();\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('cascader-search-panel'),\n      \"data-layer\": 0,\n      role: \"tree\"\n    }, items.length ? items.map(renderSearchRow) : /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('none')\n    }, locale.noResultsText));\n  };\n  var renderTreeView = function renderTreeView(positionProps, speakerRef) {\n    var _ref2 = positionProps || {},\n      left = _ref2.left,\n      top = _ref2.top,\n      className = _ref2.className;\n    var styles = _extends({}, menuStyle, {\n      left: left,\n      top: top\n    });\n    var classes = merge(className, menuClassName, prefix('cascader-menu', {\n      inline: inline\n    }));\n    return /*#__PURE__*/React.createElement(PickerPopup, {\n      ref: mergeRefs(overlay, speakerRef),\n      className: classes,\n      style: styles,\n      target: trigger,\n      onKeyDown: onPickerKeyDown\n    }, searchable && /*#__PURE__*/React.createElement(SearchBox, {\n      placeholder: locale === null || locale === void 0 ? void 0 : locale.searchPlaceholder,\n      onChange: handleSearch,\n      value: searchKeyword,\n      inputRef: searchInput\n    }), renderSearchResultPanel(), searchKeyword === '' && /*#__PURE__*/React.createElement(TreeView, {\n      menuWidth: menuWidth,\n      menuHeight: menuHeight,\n      disabledItemValues: disabledItemValues,\n      loadingItemsSet: loadingItemsSet,\n      valueKey: valueKey,\n      labelKey: labelKey,\n      childrenKey: childrenKey,\n      classPrefix: 'picker-cascader-menu',\n      cascadeData: columnsToDisplay,\n      cascadePaths: pathTowardsActiveItem,\n      activeItemValue: value\n      // FIXME make onSelect generic\n      ,\n      onSelect: handleSelect,\n      renderMenu: renderMenu,\n      renderMenuItem: renderMenuItem\n    }), renderExtraFooter === null || renderExtraFooter === void 0 ? void 0 : renderExtraFooter());\n  };\n  var selectedElement = placeholder;\n  if (pathTowardsSelectedItem.length > 0) {\n    selectedElement = [];\n    pathTowardsSelectedItem.forEach(function (item, index) {\n      var key = item[valueKey] || item[labelKey];\n      selectedElement.push( /*#__PURE__*/React.createElement(\"span\", {\n        key: key\n      }, item[labelKey]));\n      if (index < pathTowardsSelectedItem.length - 1) {\n        selectedElement.push( /*#__PURE__*/React.createElement(\"span\", {\n          className: \"separator\",\n          key: key + \"-separator\"\n        }, ' / '));\n      }\n    });\n  }\n  if (!isNil(value) && isFunction(renderValue)) {\n    selectedElement = renderValue(value, pathTowardsSelectedItem, selectedElement);\n    // If renderValue returns null or undefined, hasValue is false.\n    if (isNil(selectedElement)) {\n      hasValue = false;\n    }\n  }\n  var _usePickerClassName = usePickerClassName(_extends({}, props, {\n      classPrefix: classPrefix,\n      hasValue: hasValue,\n      name: 'cascader',\n      appearance: appearance,\n      cleanable: cleanable\n    })),\n    classes = _usePickerClassName[0],\n    usedClassNamePropKeys = _usePickerClassName[1]; // TODO: bad api design\n  //       consider an isolated Menu component\n  if (inline) {\n    return renderTreeView();\n  }\n  return /*#__PURE__*/React.createElement(PickerToggleTrigger, {\n    id: id,\n    popupType: \"tree\",\n    pickerProps: pick(props, pickTriggerPropKeys),\n    ref: trigger,\n    placement: placement,\n    onEntered: createChainedFunction(handleEntered, onEnter),\n    onExited: createChainedFunction(handleExited, onExited),\n    speaker: renderTreeView\n  }, /*#__PURE__*/React.createElement(Component, {\n    className: classes,\n    style: style,\n    ref: root\n  }, /*#__PURE__*/React.createElement(PickerToggle, _extends({}, omit(rest, [].concat(omitTriggerPropKeys, usedClassNamePropKeys)), {\n    ref: target,\n    as: toggleAs,\n    appearance: appearance,\n    disabled: disabled,\n    onClean: createChainedFunction(handleClean, onClean),\n    onKeyDown: onPickerKeyDown,\n    cleanable: cleanable && !disabled,\n    hasValue: hasValue,\n    active: active,\n    placement: placement,\n    inputValue: value !== null && value !== void 0 ? value : '',\n    focusItemValue: focusItemValue\n  }), selectedElement || (locale === null || locale === void 0 ? void 0 : locale.placeholder))));\n});\nCascader.displayName = 'Cascader';\nCascader.propTypes = _extends({}, listPickerPropTypes, {\n  disabledItemValues: PropTypes.array,\n  locale: PropTypes.any,\n  appearance: oneOf(['default', 'subtle']),\n  renderMenu: PropTypes.func,\n  onSelect: PropTypes.func,\n  onSearch: PropTypes.func,\n  cleanable: PropTypes.bool,\n  renderMenuItem: PropTypes.func,\n  renderSearchItem: PropTypes.func,\n  menuWidth: PropTypes.number,\n  menuHeight: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  searchable: PropTypes.bool,\n  inline: PropTypes.bool,\n  parentSelectable: PropTypes.bool\n});\nexport default Cascader;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}